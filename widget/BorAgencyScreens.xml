<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://ofbiz.apache.org/Widget-Screen"
	xsi:schemaLocation="http://ofbiz.apache.org/Widget-Screen http://ofbiz.apache.org/dtds/widget-screen.xsd">

	<screen name="main">
		<section>
			<actions>
				<set field="headerItem" value="main" /><!-- this highlights the selected menu-item with name "main" -->
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="FindContractors">
		<section>
			<actions>
				<set field="titleProperty" value="FindContractor" />
				<set field="headerItem" value="findcontractors" />

				<set field="formShippingListName" value="${groovy: return 'ListContractors';}" />
				<!-- <script location="component://vforder/groovyScripts/FindShipping.groovy" /> -->

				<!-- asmselect parameters, must be prefixed by asm_ for SetMultipleSelectJs.ftl -->

			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
									<decorator-section name="menu-bar">
										<container style="button-bar">
											<link target="EditContractorLayer" link-type="layered-modal" text="${uiLabelMap.NewCommon}" style="buttontext create" />
										</container>
									</decorator-section>
									<decorator-section name="search-options">
										<include-form name="FindContractors" location="component://borAgency/widget/BorAgencyForms.xml" />
									</decorator-section>
									<decorator-section name="search-results">
										<include-form name="${formShippingListName}" location="component://borAgency/widget/BorAgencyForms.xml" />
									</decorator-section>
								</decorator-screen>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditContractorLayer">
		<section>
			<actions>
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true" />
				<set field="titleProperty" value="PageTitleEditShipping" />
				<set field="tabButtonItem" value="findcontractors" />
				<set field="contractorId" from-field="parameters.contractorId" />
				<entity-one entity-name="BorContractor" value-field="contractor" />
			</actions>
			<widgets>
				<include-form name="EditContractor" location="component://borAgency/widget/BorAgencyForms.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="EditContractor">
		<section>
			<actions>
				<set field="titleProperty" value="FindContractor" />
				<set field="headerItem" value="findcontractors" />
				<set field="contractorId" from-field="parameters.contractorId" />
				<!-- <set field="workpapersId" from-field="parameters.workpapersId" /> -->
				<entity-one entity-name="BorContractor" value-field="contractor" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.EditContractor}">
							<include-form name="EditContractor" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>



	<screen name="FindClients">
		<section>
			<actions>
				<set field="titleProperty" value="FindClient" />
				<set field="headerItem" value="findclients" />

				<set field="formShippingListName" value="${groovy: return 'ListClients';}" />
				<script location="component://borAgency/groovyScripts/ListClients.groovy" />

				<!-- asmselect parameters, must be prefixed by asm_ for SetMultipleSelectJs.ftl -->

			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
									<decorator-section name="menu-bar">
										<container style="button-bar">
											<link target="EditClientLayer" link-type="layered-modal" text="${uiLabelMap.NewCommon}" style="buttontext create" />
										</container>
									</decorator-section>
									<decorator-section name="search-options">
										<include-form name="FindClients" location="component://borAgency/widget/BorAgencyForms.xml" />
									</decorator-section>
									<decorator-section name="search-results">
										<include-form name="${formShippingListName}" location="component://borAgency/widget/BorAgencyForms.xml" />
										<screenlet title="${uiLabelMap.ClientsNotBought}">
											<include-form name="ListClientsNotBought" location="component://borAgency/widget/BorAgencyForms.xml" />
										</screenlet>
									</decorator-section>

								</decorator-screen>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditClientLayer">
		<section>
			<actions>
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true" />
				<set field="titleProperty" value="PageTitleEditShipping" />
				<set field="tabButtonItem" value="findclients" />
				<set field="clientId" from-field="parameters.clientId" />
				<entity-one entity-name="BorClient" value-field="client" />
			</actions>
			<widgets>
				<include-form name="EditClient" location="component://borAgency/widget/BorAgencyForms.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="EditClient">
		<section>
			<actions>
				<set field="titleProperty" value="FindClient" />
				<set field="headerItem" value="findclients" />
				<set field="tabButtonItem" value="EditClient" />
				<set field="clientId" from-field="parameters.clientId" />
				<!-- <set field="workpapersId" from-field="parameters.workpapersId" /> -->
				<entity-one entity-name="BorClient" value-field="client" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<and>
									<not>
										<if-empty field="client" />
									</not><!-- This is a check useful when only seed data are loaded -->
								</and>
							</condition>
							<widgets>
								<include-menu name="EditClient" location="component://borAgency/widget/BorAgencyMenus.xml" />
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.EditClient}: ${client.name}
									[${uiLabelMap.CommonId}:${client.clientId}] ${${extraFunctionName}}
								</label>
							</widgets>
						</section>

						<screenlet title="${uiLabelMap.EditClient}">
							<include-form name="EditClient" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>


	<screen name="EditClientShop">
		<section>
			<actions>
				<set field="titleProperty" value="FindClient" />
				<set field="headerItem" value="findclients" />
				<set field="tabButtonItem" value="EditClientShops" />
				<set field="clientId" from-field="parameters.clientId" />
				<!-- <set field="workpapersId" from-field="parameters.workpapersId" /> -->
				<entity-one entity-name="BorClient" value-field="client" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<and>
									<not>
										<if-empty field="client" />
									</not><!-- This is a check useful when only seed data are loaded -->
								</and>
							</condition>
							<widgets>
								<include-menu name="EditClient" location="component://borAgency/widget/BorAgencyMenus.xml" />
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.EditClient}: ${client.name}
									[${uiLabelMap.CommonId}:${client.clientId}] ${${extraFunctionName}}
								</label>
							</widgets>
						</section>

						<screenlet title="${groovy: clientId ? uiLabelMap.ClientShops : uiLabelMap.NewContract}">
							<include-form name="ListClientShop" location="component://borAgency/widget/BorAgencyForms.xml" />
							<include-form name="AddClientShop" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditClientContact">
		<section>
			<actions>
				<set field="titleProperty" value="FindClient" />
				<set field="headerItem" value="findclients" />
				<set field="tabButtonItem" value="EditContacts" />
				<set field="clientId" from-field="parameters.clientId" />
				<!-- <set field="workpapersId" from-field="parameters.workpapersId" /> -->
				<entity-one entity-name="BorClient" value-field="client" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<and>
									<not>
										<if-empty field="client" />
									</not><!-- This is a check useful when only seed data are loaded -->
								</and>
							</condition>
							<widgets>
								<include-menu name="EditClient" location="component://borAgency/widget/BorAgencyMenus.xml" />
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.EditClient}: ${client.name}
									[${uiLabelMap.CommonId}:${client.clientId}] ${${extraFunctionName}}
								</label>
							</widgets>
						</section>

						<screenlet title="${groovy: clientId ? uiLabelMap.Contacts : uiLabelMap.NewContract}">
							<include-form name="ListContact" location="component://borAgency/widget/BorAgencyForms.xml" />
							<include-form name="AddContact" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditClientNote">
		<section>
			<actions>
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<set field="filcontractorId" from-field="parameters.filcontractorId" />
				<set field="fildate1From" from-field="parameters.fildate1From" />
				<set field="filshowClientNotes" from-field="parameters.filshowClientNotes" />
				<set field="clientnotePage" value="Y" />
				<set field="fildate1From" from-field="parameters.fildate1From" />
				<set field="fildate1FromTitle" value="${groovy: uiLabelMap.filclientnoteFrom}" />
				<set field="titleProperty" value="FindClient" />
				<set field="headerItem" value="findclients" />
				<set field="tabButtonItem" value="EditClientNotes" />
				<set field="clientId" from-field="parameters.clientId" />
				<set field="reportPage" value="N" />
				<!-- <set field="workpapersId" from-field="parameters.workpapersId" /> -->
				<entity-one entity-name="BorNote" value-field="note" />
				<entity-one entity-name="BorClient" value-field="client" />
				<script location="component://borAgency/groovyScripts/ListClientNotes.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>

							<widgets>
								<include-menu name="EditClient" location="component://borAgency/widget/BorAgencyMenus.xml" />
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.EditClient}: ${client.name}
									[${uiLabelMap.CommonId}:${client.clientId}] ${${extraFunctionName}}
								</label>
							</widgets>
						</section>
						<screenlet title="${uiLabelMap.Filter}">
							<include-form name="FilterGeneral" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>

						<screenlet title="${groovy: clientId ? uiLabelMap.ClientNotes : uiLabelMap.NewContract}">
							<include-form name="AddClientNote" location="component://borAgency/widget/BorAgencyForms.xml" />
							<include-form name="ListClientNote" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditClientPromotions">
		<section>
			<actions>
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<set field="filcontractorId" from-field="parameters.filcontractorId" />
				<set field="filproductId" from-field="parameters.filproductId" />
				<set field="filclientId" from-field="parameters.clientId" />
				<set field="filactiv" from-field="parameters.filactiv" />
				<set field="filpromotionId" from-field="parameters.filpromotionId" />
				<set field="filshowPromotions" from-field="parameters.filshowPromotions" />
				<set field="fildate2From" from-field="parameters.fildate2From" />
				<set field="fildate2FromTitle" value="${groovy: uiLabelMap.filpromotionFrom}" />
				<set field="fildate3From" from-field="parameters.fildate3From" />
				<set field="fildate3FromTitle" value="${groovy: uiLabelMap.filpromotionTo}" />
				<set field="headerItem" value="findclients" />
				<set field="tabButtonItem" value="EditClientPromotions" />
				<set field="promotionPage" value="Y" />
				<set field="clientId" from-field="parameters.clientId" />
				<entity-one entity-name="BorClient" value-field="client" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE_1" type="Integer" default-value="200" />
				<script location="component://borAgency/groovyScripts/ListPromotions.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>

							<widgets>
								<include-menu name="EditClient" location="component://borAgency/widget/BorAgencyMenus.xml" />
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.EditClient}: ${client.name}
									[${uiLabelMap.CommonId}:${client.clientId}] ${${extraFunctionName}}
								</label>

							</widgets>
						</section>

						<!-- <container style="button-bar"> <link target="PromotionExport.csv" text="${uiLabelMap.CommonExport}" style="buttontext create" 
							target-window="_blank"> <parameter param-name="filcontractorId" /> <parameter param-name="filproductId" /> <parameter param-name="filclientId" 
							/> <parameter param-name="filactiv" /> <parameter param-name="fildate2From" /> <parameter param-name="filshowPromotions" /> </link> 
							</container> -->
						<screenlet title="${uiLabelMap.Filter}">
							<include-form name="FilterGeneral" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>
						<label style="h1">Selezionare un mandante prima di inserire una promozione o aggiungere un prodotto alla promo!!!
						</label>
						<screenlet title="${uiLabelMap.AddPromotion}">
							<include-form name="AddPromotion" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>
						<screenlet title="${uiLabelMap.Promotion}">
							<include-form name="ListPromotions" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditClientPromotionDetails">
		<section>
			<actions>
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<set field="filcontractorId" from-field="parameters.filcontractorId" />
				<set field="filproductId" from-field="parameters.filproductId" />
				<set field="filclientId" from-field="parameters.filclientId" />
				<set field="filactiv" from-field="parameters.filactiv" />
				<set field="filpromotionId" from-field="parameters.filpromotionId" />
				<set field="filshowPromotions" from-field="parameters.filshowPromotions" />
				<set field="fildate2From" from-field="parameters.fildate2From" />
				<set field="fildate2FromTitle" value="${groovy: uiLabelMap.filpromotionFrom}" />
				<set field="fildate3From" from-field="parameters.fildate3From" />
				<set field="fildate3FromTitle" value="${groovy: uiLabelMap.filpromotionTo}" />
				<set field="headerItem" value="findclients" />
				<set field="tabButtonItem" value="EditClientPromotions" />
				<set field="promotionPage" value="Y" />
				<set field="clientId" from-field="parameters.clientId" />
				<set field="promotionId" from-field="parameters.promotionId" />
				<set field="contractorId" from-field="parameters.contractorId" />
				<entity-one entity-name="BorClient" value-field="client" />
				<entity-one entity-name="BorContractor" value-field="contractor" />
				<entity-one entity-name="BorPromotion" value-field="promotion" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE_1" type="Integer" default-value="200" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>

							<widgets>
								<include-menu name="EditClient" location="component://borAgency/widget/BorAgencyMenus.xml" />
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.EditClient}: ${client.name}
									[${uiLabelMap.CommonId}:${client.clientId}] ${${extraFunctionName}}
								</label>
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.ClientPromotions}: ${promotion.name}
									[${uiLabelMap.CommonId}:${promotion.promotionId}] ${${extraFunctionName}}
								</label>
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.ContractorName}: ${contractor.name}
									[${uiLabelMap.CommonId}:${contractor.contractorId}] ${${extraFunctionName}}
								</label>

							</widgets>
						</section>


						<screenlet title="${uiLabelMap.AddPromotionDetail}">
							<include-form name="AddPromotionDetail" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>
						<screenlet title="${uiLabelMap.PromotionDetail}">
							<include-form name="ListPromotionDetails" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>







	<screen name="FindProducts">
		<section>
			<actions>
				<set field="titleProperty" value="FindProduct" />
				<set field="headerItem" value="findProducts" />

				<set field="formShippingListName" value="${groovy: return 'ListProducts';}" />
				<!-- <script location="component://vforder/groovyScripts/FindShipping.groovy" /> -->

				<!-- asmselect parameters, must be prefixed by asm_ for SetMultipleSelectJs.ftl -->

			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
									<decorator-section name="menu-bar">
										<container style="button-bar">
											<link target="EditProductLayer" link-type="layered-modal" text="${uiLabelMap.NewCommon}" style="buttontext create" />
										</container>
									</decorator-section>
									<decorator-section name="search-options">
										<include-form name="FindProducts" location="component://borAgency/widget/BorAgencyForms.xml" />
									</decorator-section>
									<decorator-section name="search-results">
										<include-form name="${formShippingListName}" location="component://borAgency/widget/BorAgencyForms.xml" />
									</decorator-section>
								</decorator-screen>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditProductLayer">
		<section>
			<actions>
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true" />
				<set field="titleProperty" value="PageTitleEditShipping" />
				<set field="tabButtonItem" value="findProducts" />
				<set field="ProductId" from-field="parameters.ProductId" />
				<entity-one entity-name="BorProduct" value-field="Product" />
			</actions>
			<widgets>
				<include-form name="EditProduct" location="component://borAgency/widget/BorAgencyForms.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="EditProduct">
		<section>
			<actions>
				<set field="titleProperty" value="FindProduct" />
				<set field="headerItem" value="findProducts" />
				<set field="productId" from-field="parameters.productId" />
				<!-- <set field="workpapersId" from-field="parameters.workpapersId" /> -->
				<entity-one entity-name="BorProduct" value-field="Product" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">

						<screenlet title="${uiLabelMap.EditProduct}">
							<include-form name="EditProduct" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="FindPriceLists">
		<section>
			<actions>
				<set field="titleProperty" value="FindPriceList" />
				<set field="headerItem" value="findPriceLists" />


				<set field="formShippingListName" value="${groovy: return 'ListPriceLists';}" />
				<!-- <script location="component://vforder/groovyScripts/FindShipping.groovy" /> -->

				<!-- asmselect parameters, must be prefixed by asm_ for SetMultipleSelectJs.ftl -->

			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
									<decorator-section name="menu-bar">
										<container style="button-bar">
											<link target="EditPriceListLayer" link-type="layered-modal" text="${uiLabelMap.NewCommon}" style="buttontext create" />
										</container>
									</decorator-section>
									<decorator-section name="search-options">
										<include-form name="FindPriceLists" location="component://borAgency/widget/BorAgencyForms.xml" />
									</decorator-section>
									<decorator-section name="search-results">
										<include-form name="${formShippingListName}" location="component://borAgency/widget/BorAgencyForms.xml" />
									</decorator-section>
								</decorator-screen>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditPriceListLayer">
		<section>
			<actions>
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true" />
				<set field="titleProperty" value="PageTitleEditShipping" />
				<set field="tabButtonItem" value="findPriceLists" />
				<set field="PriceListId" from-field="parameters.PriceListId" />
				<entity-one entity-name="BorPriceList" value-field="PriceList" />
			</actions>
			<widgets>
				<include-form name="EditPriceList" location="component://borAgency/widget/BorAgencyForms.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="EditPriceList">
		<section>
			<actions>
				<set field="titleProperty" value="EditPriceList" />
				<set field="headerItem" value="findPriceLists" />
				<set field="pricelistId" from-field="parameters.pricelistId" />
				<!-- <set field="workpapersId" from-field="parameters.workpapersId" /> -->
				<set field="tabButtonItem" value="EditPriceList" />
				<entity-one entity-name="BorPriceList" value-field="PriceList" />
				<set field="contractorId" from-field="PriceList.contractorId" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<and>
									<not>
										<if-empty field="PriceList" />
									</not><!-- This is a check useful when only seed data are loaded -->
								</and>
							</condition>
							<widgets>
								<include-menu name="EditPriceList" location="component://borAgency/widget/BorAgencyMenus.xml" />
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.EditPriceList}: ${PriceList.name}
									[${uiLabelMap.CommonId}:${PriceList.pricelistId}] ${${extraFunctionName}}
								</label>
							</widgets>
						</section>
						<section>
							<widgets>
								<screenlet title="${uiLabelMap.EditPriceList}">
									<include-form name="EditPriceList" location="component://borAgency/widget/BorAgencyForms.xml" />
								</screenlet>
							</widgets>
						</section>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="EditPriceListDetail">
		<section>
			<actions>
				<set field="titleProperty" value="EditPriceListDetail" />
				<set field="headerItem" value="findPriceLists" />
				<set field="pricelistId" from-field="parameters.pricelistId" />
				<!-- <set field="workpapersId" from-field="parameters.workpapersId" /> -->
				<set field="tabButtonItem" value="EditPriceListDetail" />
				<entity-one entity-name="BorPriceListDetail" value-field="PriceListDetail" />
				<entity-one entity-name="BorPriceList" value-field="PriceList" />
				<set field="contractorId" from-field="PriceList.contractorId" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>

							<widgets>
								<include-menu name="EditPriceList" location="component://borAgency/widget/BorAgencyMenus.xml" />
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.EditPriceList}: ${PriceList.name}
									[${uiLabelMap.CommonId}:${PriceList.pricelistId}] ${${extraFunctionName}}
								</label>
							</widgets>
						</section>
						<section>
							<widgets>
								<screenlet title="${uiLabelMap.PriceList}">
									<include-form name="ListPriceListDetails" location="component://borAgency/widget/BorAgencyForms.xml" />
									<include-form name="AddPriceListDetails" location="component://borAgency/widget/BorAgencyForms.xml" />
								</screenlet>
							</widgets>
						</section>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="FindContracts">
		<section>
			<actions>
				<set field="filcontractorId" from-field="parameters.filcontractorId" />
				<set field="filactiv" from-field="parameters.filactiv" />
				<set field="titleProperty" value="FindContract" />
				<set field="headerItem" value="findContracts" />
				<set field="contractPage" value="Y" />
				<set field="formShippingListName" value="${groovy: return 'ListContracts';}" />
				<!-- <script location="component://vforder/groovyScripts/FindShipping.groovy" /> -->
				<script location="component://borAgency/groovyScripts/ListContracts.groovy" />
				<!-- asmselect parameters, must be prefixed by asm_ for SetMultipleSelectJs.ftl -->

			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
									<decorator-section name="menu-bar">
										<container style="button-bar">
											<link target="EditContractLayer" link-type="layered-modal" text="${uiLabelMap.NewCommon}" style="buttontext create" />
											<link target="ContractExport.csv" text="${uiLabelMap.CommonExport}" style="buttontext create" target-window="_blank">
												<parameter param-name="filcontractorId" />
												<parameter param-name="filactiv" />
											</link>
										</container>

									</decorator-section>
									<decorator-section name="search-options">
										<include-form name="FilterGeneral" location="component://borAgency/widget/BorAgencyForms.xml" />
									</decorator-section>
									<decorator-section name="search-results">
										<include-form name="${formShippingListName}" location="component://borAgency/widget/BorAgencyForms.xml" />
									</decorator-section>
								</decorator-screen>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditContractLayer">
		<section>
			<actions>
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true" />
				<set field="titleProperty" value="PageTitleEditShipping" />
				<set field="tabButtonItem" value="findContracts" />
				<set field="ContractId" from-field="parameters.ContractId" />
				<entity-one entity-name="BorContract" value-field="Contract" />
			</actions>
			<widgets>
				<include-form name="EditContract" location="component://borAgency/widget/BorAgencyForms.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="EditContract">
		<section>
			<actions>
				<set field="titleProperty" value="FindContract" />
				<set field="headerItem" value="findContracts" />
				<set field="contractId" from-field="parameters.contractId" />
				<set field="tabButtonItem" value="EditContract" />
				<!-- <set field="workpapersId" from-field="parameters.workpapersId" /> -->
				<entity-one entity-name="BorContract" value-field="Contract" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<and>
									<not>
										<if-empty field="Contract" />
									</not><!-- This is a check useful when only seed data are loaded -->
								</and>
							</condition>
							<widgets>
								<include-menu name="EditContract" location="component://borAgency/widget/BorAgencyMenus.xml" />
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.EditContract}: ${Contract.name}
									[${uiLabelMap.CommonId}:${Contract.contractId}] ${${extraFunctionName}}
								</label>
							</widgets>
						</section>

						<screenlet title="${uiLabelMap.EditContract}">
							<include-form name="EditContract" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="EditContractDetail">
		<section>
			<actions>
				<set field="titleProperty" value="EditContractDetail" />
				<set field="headerItem" value="findContracts" />
				<set field="contractId" from-field="parameters.contractId" />
				<!-- <set field="workpapersId" from-field="parameters.workpapersId" /> -->
				<set field="tabButtonItem" value="EditContractDetail" />
				<entity-one entity-name="BorContractDetail" value-field="ContractDetail" />
				<entity-one entity-name="BorContract" value-field="Contract" />
				<set field="contractorId" from-field="Contract.contractorId" />
				<script location="component://borAgency/groovyScripts/ContractDetail.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>

							<widgets>
								<include-menu name="EditContract" location="component://borAgency/widget/BorAgencyMenus.xml" />
								<label style="h1">${uiLabelMap[labelTitleProperty]} ${uiLabelMap.EditContract}: ${Contract.name}
									[${uiLabelMap.CommonId}:${Contract.contractId}] ${${extraFunctionName}}
								</label>
							</widgets>
						</section>
						<section>
							<widgets>
								<screenlet title="${groovy: contractId ? uiLabelMap.EditContract : uiLabelMap.NewContract}">
									<include-form name="ListContractDetails" location="component://borAgency/widget/BorAgencyForms.xml" />

									<container style="page-title">
										<label text="${uiLabelMap.TotalValue}: ${Contract.totalValue} %"></label>
									</container>

									<include-form name="AddContractDetails" location="component://borAgency/widget/BorAgencyForms.xml" />
								</screenlet>
							</widgets>
						</section>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>


	<screen name="FindConditions">
		<section>
			<actions>
				<set field="filcontractorId" from-field="parameters.filcontractorId" />
				<set field="filproductId" from-field="parameters.filproductId" />
				<set field="filclientId" from-field="parameters.filclientId" />
				<set field="filclientType" from-field="parameters.filclientType" />
				<set field="filactiv" from-field="parameters.filactiv" />
				<set field="filshowConditions" from-field="parameters.filshowConditions" />
				<set field="conditionPage" value="Y" />
				<set field="headerItem" value="findConditions" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE_1" type="Integer" default-value="200" />
				<script location="component://borAgency/groovyScripts/ListConditions.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<container style="button-bar">
							<link target="ConditionExport.csv" text="${uiLabelMap.CommonExport}" style="buttontext create" target-window="_blank">
								<parameter param-name="filcontractorId" />
								<parameter param-name="filproductId" />
								<parameter param-name="filclientId" />
								<parameter param-name="filclientType" />
								<parameter param-name="filactiv" />
								<parameter param-name="filshowConditions" />
							</link>
						</container>
						<screenlet title="${uiLabelMap.Filter}">
							<include-form name="FilterGeneral" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>
						<screenlet title="${uiLabelMap.Conditions}">
							<include-form name="ListConditions" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>
						<screenlet title="${uiLabelMap.AddCondition}">
							<include-form name="AddCondition" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="ContractDetailLayer">
		<section>
			<actions>
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true" />
				<set field="contractId" from-field="parameters.contractId" />
				<!-- <set field="workpapersId" from-field="parameters.workpapersId" /> -->
				<set field="tabButtonItem" value="EditContractDetail" />
				<set field="modeLayer" value="Y" />
				<entity-one entity-name="BorContractDetail" value-field="ContractDetail" />
				<entity-one entity-name="BorContract" value-field="Contract" />
				<set field="contractorId" from-field="Contract.contractorId" />
				<script location="component://borAgency/groovyScripts/ContractDetail.groovy" />
			</actions>
			<widgets>
				<screenlet title="${uiLabelMap.CommonInfos}">
					<container>
						<label style="h2" text="${uiLabelMap.GeneralId} : ${Contract.contractId}" />
					</container>
					<container>
						<label style="h2" text="${uiLabelMap.ContractName} : ${Contract.name}" />
					</container>
				</screenlet>
				<include-form name="ListContractDetails" location="component://borAgency/widget/BorAgencyForms.xml" />
			</widgets>
		</section>
	</screen>

	<screen name="FindPriceChecks">
		<section>
			<actions>
				<set field="filcontractorId" from-field="parameters.filcontractorId" />
				<set field="filproductId" from-field="parameters.filproductId" />
				<set field="filclientId" from-field="parameters.filclientId" />
				<set field="headerItem" value="findPriceChecks" />
				<set field="priceCheckPage" value="Y" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE_1" type="Integer" default-value="200" />
				<script location="component://borAgency/groovyScripts/ListPriceChecks.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<!-- <container style="button-bar"> <link target="PriceCheckExport.csv" text="${uiLabelMap.CommonExport}" style="buttontext create" 
							target-window="_blank"> <parameter param-name="filcontractorId" /> <parameter param-name="filproductId" /> </link> </container> -->
						<screenlet title="${uiLabelMap.Filter}">
							<include-form name="FilterGeneral" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>
						<screenlet title="${uiLabelMap.PriceCheck}">
							<include-form name="ListPriceChecks" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>
						<screenlet title="${uiLabelMap.AddPriceCheck}">
							<include-form name="AddPriceCheck" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="FindReports">
		<section>
			<actions>
				<!-- for uiLabelMap.filclientnoteFrom -->
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<set field="filcontractorId" from-field="parameters.filcontractorId" />
				<set field="filproductId" from-field="parameters.filproductId" />
				<set field="filclientId" from-field="parameters.filclientId" />
				<set field="filactiv" from-field="parameters.filactiv" />
				<set field="filpromotionId" from-field="parameters.filpromotionId" />
				<set field="fildate1From" from-field="parameters.fildate1From" />
				<set field="fildate1FromTitle" value="${groovy: uiLabelMap.filclientnoteFrom}" />
				<set field="fildate2From" from-field="parameters.fildate2From" />
				<set field="fildate2FromTitle" value="${groovy: uiLabelMap.filpromotionFrom}" />
				<set field="fildate3From" from-field="parameters.fildate3From" />
				<set field="fildate3FromTitle" value="${groovy: uiLabelMap.filpromotionTo}" />
				<set field="filshowConditions" from-field="parameters.filshowConditions" />
				<set field="filshowPromotions" from-field="parameters.filshowPromotions" />
				<set field="filshowClientNotes" from-field="parameters.filshowClientNotes" />
				<set field="filshowClientInfos" from-field="parameters.filshowClientInfos" />
				<set field="headerItem" value="findReports" />
				<set field="reportPage" value="Y" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE_1" type="Integer" default-value="200" />
				<script location="component://borAgency/groovyScripts/ListConditions.groovy" />
				<script location="component://borAgency/groovyScripts/ListPromotions.groovy" />
				<script location="component://borAgency/groovyScripts/ListClientNotes.groovy" />
				<script location="component://borAgency/groovyScripts/ListClientInfos.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="BorAgencyCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">

						<!-- <container style="button-bar">
							<link target="ReportExportPdf" text="${uiLabelMap.CommonPdf}" style="buttontext create" target-window="_blank">
								<parameter param-name="filcontractorId" />
								<parameter param-name="filproductId" />
								<parameter param-name="filclientId" />
								<parameter param-name="filactiv" />
								<parameter param-name="fildate1From" />
								<parameter param-name="fildate2From" />
								<parameter param-name="fildate3From" />
								<parameter param-name="filshowConditions" />
								<parameter param-name="filshowPromotions" />
								<parameter param-name="filshowClientNotes" />
								<parameter param-name="filpromotionId" />

							</link>
						</container> -->
						<container style="button-bar">
							<link target="ReportExport.csv" text="${uiLabelMap.CommonExport}" style="buttontext create" target-window="_blank">
								<parameter param-name="filcontractorId" />
								<parameter param-name="filproductId" />
								<parameter param-name="filclientId" />
								<parameter param-name="filactiv" />
								<parameter param-name="fildate1From" />
								<parameter param-name="fildate2From" />
								<parameter param-name="fildate3From" />
								<parameter param-name="filshowConditions" />
								<parameter param-name="filshowPromotions" />
								<parameter param-name="filshowClientNotes" />
								<parameter param-name="filshowClientInfos" />

							</link>
						</container>
						<screenlet title="${uiLabelMap.Filter}">
							<include-form name="FilterGeneral" location="component://borAgency/widget/BorAgencyForms.xml" />
						</screenlet>

						<screenlet title="${uiLabelMap.Report}">
							<container>
								<label style="h2" text="${uiLabelMap.Conditions}" />
							</container>
							<include-form name="ConditionExport" location="component://borAgency/widget/CsvForms.xml" />
							<container>
								<label style="h2" text="${uiLabelMap.Promotions}" />
							</container>
							<include-form name="PromotionExport" location="component://borAgency/widget/CsvForms.xml" />
							
							<container>
								<label style="h2" text="${uiLabelMap.ClientRevenues}" />
							</container>
							<include-form name="ClientRevenueExport" location="component://borAgency/widget/CsvForms.xml" />
							<container>
								<label style="h2" text="${uiLabelMap.ClientBuyGroup}" />
							</container>
							<include-form name="ClientBuyGroupExport" location="component://borAgency/widget/CsvForms.xml" />
							<container>
								<label style="h2" text="${uiLabelMap.ClientPayCond}" />
							</container>
							<include-form name="ClientPayCondExport" location="component://borAgency/widget/CsvForms.xml" />
							<container>
								<label style="h2" text="${uiLabelMap.Contacts}" />
							</container>
							<include-form name="ClientContactsExport" location="component://borAgency/widget/CsvForms.xml" />
							<container>
								<label style="h2" text="${uiLabelMap.ClientNotes}" />
							</container>
							<include-form name="ClientNoteExport" location="component://borAgency/widget/CsvForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="ReportExportPdf">
		<section>
			<actions>
				<set field="filcontractorId" from-field="parameters.filcontractorId" />
				<set field="filproductId" from-field="parameters.filproductId" />
				<set field="filclientId" from-field="parameters.filclientId" />
				<set field="filactiv" from-field="parameters.filactiv" />
				<set field="fildate1From" from-field="parameters.fildate1From" />
				<set field="fildate2From" from-field="parameters.fildate2From" />
				<set field="filshowConditions" from-field="parameters.filshowConditions" />
				<set field="filshowPromotions" from-field="parameters.filshowPromotions" />
				<set field="filshowClientNotes" from-field="parameters.filshowClientNotes" />
				<set field="headerItem" value="findReports" />
				<set field="reportPage" value="Y" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE_1" type="Integer" default-value="200" />
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<script location="component://borAgency/groovyScripts/ListConditions.groovy" />
				<script location="component://borAgency/groovyScripts/ListPromotions.groovy" />
				<script location="component://borAgency/groovyScripts/ListClientNotes.groovy" />
			</actions>

			<widgets>
				<section>

					<widgets>
						<decorator-screen name="FoReportDecorator" location="component://common/widget/CommonScreens.xml">

							<decorator-section name="body">
								<include-screen name="ConditionReportPdf" location="component://borAgency/widget/BorAgencyScreens.xml" />
								<include-screen name="PromotionReportPdf" location="component://borAgency/widget/BorAgencyScreens.xml" />
								<include-screen name="ClientNoteReportPdf" location="component://borAgency/widget/BorAgencyScreens.xml" />

							</decorator-section>
						</decorator-screen>

					</widgets>
				</section>

			</widgets>
		</section>
	</screen>

	<screen name="ConditionReportPdf">
		<section>
			<actions>
				<set field="headerItem" value="findReports" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE_1" type="Integer" default-value="200" />
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<script location="component://borAgency/groovyScripts/ListConditions.groovy" />
			</actions>

			<widgets>
				<section>
					<condition>
						<or>
							<if-compare field="filshowConditions" operator="equals" value="Y" />
						</or>
					</condition>
					<widgets>

						<platform-specific>
							<xsl-fo>
								<html-template location="component://borAgency/template/reports/ConditionsReportPdf.fo.ftl" />

							</xsl-fo>
						</platform-specific>



					</widgets>
				</section>

			</widgets>
		</section>

	</screen>
	<screen name="PromotionReportPdf">
		<section>
			<actions>
				<set field="headerItem" value="findReports" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE_1" type="Integer" default-value="200" />
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<script location="component://borAgency/groovyScripts/ListPromotions.groovy" />
			</actions>

			<widgets>
				<section>
					<condition>
						<or>
							<if-compare field="filshowPromotions" operator="equals" value="Y" />
						</or>
					</condition>
					<widgets>

						<platform-specific>
							<xsl-fo>
								<html-template location="component://borAgency/template/reports/PromotionsReportPdf.fo.ftl" />
							</xsl-fo>
						</platform-specific>



					</widgets>
				</section>

			</widgets>
		</section>

	</screen>
	<screen name="ClientNoteReportPdf">
		<section>
			<actions>
				<set field="headerItem" value="findReports" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE_1" type="Integer" default-value="200" />
				<property-map resource="BorAgencyUiLabels" map-name="uiLabelMap" global="true" />
				<script location="component://borAgency/groovyScripts/ListClientNotes.groovy" />
			</actions>

			<widgets>
				<section>
					<condition>
						<or>
							<if-compare field="filshowClientNotes" operator="equals" value="Y" />
						</or>
					</condition>
					<widgets>

						<platform-specific>
							<xsl-fo>
								<html-template location="component://borAgency/template/reports/ClientNotesReportPdf.fo.ftl" />
							</xsl-fo>
						</platform-specific>



					</widgets>
				</section>

			</widgets>
		</section>

	</screen>




</screens>